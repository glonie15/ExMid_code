<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crop Recommendation System</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="container">
        <h1>Philippine Crop Recommendation System</h1>

        <div class="info-section">
            <h2>Understanding Soil Types and Moisture Levels</h2>
            
            <div class="info-grid">
                <div class="info-card">
                    <h3>Soil Types</h3>
                    <div class="soil-types">
                        <div class="soil-type">
                            <h4>Loamy Soil</h4>
                            <img src="{{ url_for('static', filename='images/loam-soil.jpg') }}" alt="Loamy Soil" class="soil-image">
                            <p>Loamy soil is considered ideal for most crops because it:</p>
                            <ul>
                                <li>Contains a balanced mixture of sand, silt, and clay</li>
                                <li>Provides excellent drainage while retaining moisture</li>
                                <li>Allows easy root penetration</li>
                                <li>Rich in nutrients and organic matter</li>
                            </ul>
                        </div>

                        <div class="soil-type">
                            <h4>Sandy Soil</h4>
                            <img src="{{ url_for('static', filename='images/sandy-soil.jpg') }}" alt="Sandy Soil" class="soil-image">
                            <p>Sandy soil is light and well-aerated but has some limitations:</p>
                            <ul>
                                <li>Drains water quickly</li>
                                <li>Warms up quickly in spring</li>
                                <li>Lower in nutrients</li>
                                <li>Requires frequent watering</li>
                            </ul>
                        </div>

                        <div class="soil-type">
                            <h4>Clay Soil</h4>
                            <img src="{{ url_for('static', filename='images/clay-soil.jpg') }}" alt="Clay Soil" class="soil-image">
                            <p>Clay soil is nutrient-rich but can be challenging:</p>
                            <ul>
                                <li>Retains water and nutrients well</li>
                                <li>Can become compacted</li>
                                <li>Slow to warm in spring</li>
                                <li>Can be difficult for roots to penetrate</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="info-card">
                    <h3>Moisture Levels</h3>
                    <div class="moisture-levels">
                        <div class="moisture-type">
                            <h4>Dry Soil</h4>
                            <img src="{{ url_for('static', filename='images/dry-soil.jpg') }}" alt="Dry Soil" class="moisture-image">
                            <p>Characteristics of dry soil:</p>
                            <ul>
                                <li>Appears light in color</li>
                                <li>Crumbly and loose texture</li>
                                <li>Dusty when disturbed</li>
                                <li>Water quickly drains through</li>
                            </ul>
                        </div>

                        <div class="moisture-type">
                            <h4>Moist Soil</h4>
                            <img src="{{ url_for('static', filename='images/moist-soil.jpg') }}" alt="Moist Soil" class="moisture-image">
                            <p>Ideal moisture level for most plants:</p>
                            <ul>
                                <li>Appears dark and rich in color</li>
                                <li>Forms a ball when squeezed</li>
                                <li>Breaks apart easily</li>
                                <li>Perfect balance of water and air</li>
                            </ul>
                        </div>

                        <div class="moisture-type">
                            <h4>Wet Soil</h4>
                            <img src="{{ url_for('static', filename='images/wet-soil.jpg') }}" alt="Wet Soil" class="moisture-image">
                            <p>Signs of overly wet soil:</p>
                            <ul>
                                <li>Appears very dark and glossy</li>
                                <li>Water pools on surface</li>
                                <li>Sticky and moldable</li>
                                <li>Limited air spaces for roots</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="form-container">
            <h2>Enter Your Soil Parameters</h2>
            <form method="POST" action="/">
                <div class="form-group">
                    <label for="ph">Soil pH:</label>
                    <input type="number" step="0.1" name="ph" id="ph" value="{{ request.form.ph or '' }}" required>
                    <div class="input-help">
                        <p>pH measures soil acidity. Most crops prefer pH between 6.0 and 7.0</p>
                    </div>
                </div>

                <div class="form-group">
                    <label for="soil_type">Soil Type:</label>
                    <select name="soil_type" id="soil_type" required>
                        <option value="">Select Soil Type</option>
                        <option value="loam" {% if request.form.soil_type == 'loam' %}selected{% endif %}>Loam</option>
                        <option value="sandy" {% if request.form.soil_type == 'sandy' %}selected{% endif %}>Sandy</option>
                        <option value="clay" {% if request.form.soil_type == 'clay' %}selected{% endif %}>Clay</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="moisture">Soil Moisture Level:</label>
                    <select name="moisture" id="moisture" required>
                        <option value="">Select Moisture Level</option>
                        <option value="dry" {% if request.form.moisture == 'dry' %}selected{% endif %}>Dry (30–50%)</option>
                        <option value="moist" {% if request.form.moisture == 'moist' %}selected{% endif %}>Moist (50–70%)</option>
                        <option value="wet" {% if request.form.moisture == 'wet' %}selected{% endif %}>Wet (70–90%)</option>
                    </select>
                </div>

                <div class="button-group">
                    <button type="submit">Get Recommendations</button>
                    <button type="submit" name="exit" value="1">Exit</button>
                </div>
            </form>
        </div>

        {% if crops %}
            <h2>Recommended Crops</h2>
            <div class="table-container">
                <table class="results-table">
                    <thead>
                        <tr>
                            <th>Crop Name</th>
                            <th>pH Range</th>
                            <th>Soil Type</th>
                            <th>Moisture</th>
                            <th>Expected Harvest</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for crop in crops %}
                        <tr>
                            <td>{{ crop.crop }}</td>
                            <td>{{ crop.pH_min }} – {{ crop.pH_max }}</td>
                            <td>{{ crop.soil_type.capitalize() }}</td>
                            <td>{{ crop.moisture_level.capitalize() }}</td>
                            <td>{{ crop.harvest_date }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        {% elif request.method == 'POST' %}
            <div class="error-message">
                <strong>No matching crops found for your input.</strong>
                <p>Please try different soil parameters.</p>
            </div>
        {% endif %}
    </div>
</body>
</html>

