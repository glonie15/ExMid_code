<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crop Recommendation System</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="container">
        <h1>Philippine Crop Recommendation System</h1>

        <div class="form-container">
            <form method="POST" action="/">
                <div class="form-group">
                    <label for="ph">Soil pH:</label>
                    <input type="number" step="0.1" name="ph" id="ph" value="{{ request.form.ph or '' }}" required>
                </div>

                <div class="form-group">
                    <label for="soil_type">Soil Type:</label>
                    <select name="soil_type" id="soil_type" required>
                        <option value="">Select Soil Type</option>
                        <option value="loam" {% if request.form.soil_type == 'loam' %}selected{% endif %}>Loam</option>
                        <option value="sandy" {% if request.form.soil_type == 'sandy' %}selected{% endif %}>Sandy</option>
                        <option value="clay" {% if request.form.soil_type == 'clay' %}selected{% endif %}>Clay</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="moisture">Soil Moisture Level:</label>
                    <select name="moisture" id="moisture" required>
                        <option value="">Select Moisture Level</option>
                        <option value="dry" {% if request.form.moisture == 'dry' %}selected{% endif %}>Dry (30–50%)</option>
                        <option value="moist" {% if request.form.moisture == 'moist' %}selected{% endif %}>Moist (50–70%)</option>
                        <option value="wet" {% if request.form.moisture == 'wet' %}selected{% endif %}>Wet (70–90%)</option>
                    </select>
                    <div class="moisture-info">
                        <strong>Moisture Reference:</strong>
                        <ul>
                            <li>Dry: 30–50%</li>
                            <li>Moist: 50–70%</li>
                            <li>Wet: 70–90%</li>
                        </ul>
                    </div>
                </div>

                <div class="button-group">
                    <button type="submit">Get Recommendations</button>
                    <button type="submit" name="exit" value="1">Exit</button>
                </div>
            </form>
        </div>

        {% if crops %}
            <h2>Recommended Crops</h2>
            <div class="table-container">
                <table class="results-table">
                    <thead>
                        <tr>
                            <th>Crop Name</th>
                            <th>pH Range</th>
                            <th>Soil Type</th>
                            <th>Moisture</th>
                            <th>Expected Harvest</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for crop in crops %}
                        <tr>
                            <td>{{ crop.crop }}</td>
                            <td>{{ crop.pH_min }} – {{ crop.pH_max }}</td>
                            <td>{{ crop.soil_type.capitalize() }}</td>
                            <td>{{ crop.moisture_level.capitalize() }}</td>
                            <td>{{ crop.harvest_date }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        {% elif request.method == 'POST' %}
            <div class="error-message">
                <strong>No matching crops found for your input.</strong>
                <p>Please try different soil parameters.</p>
            </div>
        {% endif %}
    </div>
</body>
</html>

